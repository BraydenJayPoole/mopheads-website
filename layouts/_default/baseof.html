<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    {{ partial "metadata/meta.html" . }}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    {{ partial "header/header.html" . }}
    <main>
            {{ block "main" . }}{{ end }}
    </main>
    {{ partial "site/scripts.html" . }} 
    {{ partial "navigation/footer.html" . }}


  {{/* Get the list of used components from the page's Store */}}
  {{- $usedComponents := .Store.Get "components" | uniq -}}

  {{/* Base styles that are always included */}}
  {{ $styles := resources.Get "css/style.css" | resources.ExecuteAsTemplate "css/style.css" . | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}">

  <script>
 // This script should be in your main JS file or in baseof.html, loaded once.

// This script should be in your main JS file or in baseof.html, loaded once.

document.addEventListener('DOMContentLoaded', () => {
    const masterPanes = document.querySelectorAll('.service-layout__master');

    if (!masterPanes.length) {
        return;
    }

    const allSectionData = {};
    document.querySelectorAll('script[id^="services-data-"]').forEach(scriptTag => {
        const categoryKey = scriptTag.id.replace('services-data-', '');
        try {
            const jsonString = JSON.parse(scriptTag.textContent);
            allSectionData[categoryKey] = JSON.parse(jsonString);
        } catch (e) {
            console.error(`Failed to parse services data for category ${categoryKey}:`, e);
        }
    });

    // MODIFIED generateIconHTML (was generateIconSVG) function
    function generateIconHTML(type) {
        let iconClass = '';
        let iconColor = 'var(--cinnabar)'; // Default color from your theme

        switch (type) {
            case 'home': // For "Home Sweet Clean" (Overview)
                iconClass = 'fas fa-home';
                iconColor = '#8B5CF6'; // Purple, similar to image
                break;
            case 'calendar': // For "Your Clean, Your Schedule"
                iconClass = 'fas fa-calendar-alt';
                iconColor = '#8B5CF6'; // Purple, similar to image
                break;
            case 'checklistLarge': // For "Comprehensive Checklist" title
                iconClass = 'fas fa-clipboard-list'; // Or 'fa-tasks'
                iconColor = '#10B981'; // Green, similar to image
                break;
            case 'checklistSmall': // For individual checklist items
                iconClass = 'fas fa-check-circle'; // A circle check
                iconColor = '#10B981'; // Green
                return `<i class="${iconClass}" style="color: ${iconColor}; font-size: 1em; vertical-align: middle; margin-right: 8px;"></i>`; // Smaller, specific style
            case 'tag': // For "Clear & Fair Pricing"
                iconClass = 'fas fa-tags'; // or 'fa-dollar-sign'
                iconColor = '#F59E0B'; // Amber/Gold, similar to image
                break;
            default:
                iconClass = 'fas fa-info-circle'; // Fallback
                break;
        }
        return `<i class="${iconClass}" style="color: ${iconColor};"></i>`;
    }

    // MODIFIED updateDetailView function
    function updateDetailView(detailContentElement, serviceData) {
        let html = '<p class="service-layout__detail-placeholder">Details not available.</p>';

        if (serviceData) {
            html = '<div class="service-layout__detail-bento-grid">';

            if (serviceData.overview) {
                html += `
                    <div class="service-layout__detail-bento-card service-layout__detail-bento-card--icon-left">
                        <div class="service-layout__detail-icon">
                            ${generateIconHTML("home")}
                        </div>
                        <div class="service-layout__detail-card-content">
                            <h4>${serviceData.type === 'Domestic' || serviceData.type === 'domestic' ? 'Home Sweet Clean' : 'Service Overview'}</h4>
                            <p>${serviceData.overview}</p>
                        </div>
                    </div>`;
            }

            if (serviceData.schedule_options) {
                html += `
                    <div class="service-layout__detail-bento-card service-layout__detail-bento-card--icon-left">
                        <div class="service-layout__detail-icon">
                            ${generateIconHTML("calendar")}
                        </div>
                        <div class="service-layout__detail-card-content">
                            <h4>Your Clean, Your Schedule</h4>
                            <p>${serviceData.schedule_options}</p>
                        </div>
                    </div>`;
            }

            if (serviceData.inclusions) {
                let inclusionsContent = '';
                const items = serviceData.inclusions.split(',').map(item => item.trim()).filter(item => item);
                if (items.length > 0) {
                     inclusionsContent = '<ul>' + items.map(item => `<li>${generateIconHTML("checklistSmall")}${item}</li>`).join('') + '</ul>';
                } else {
                    inclusionsContent = `<p>Standard cleaning tasks.</p>`;
                }
                html += `
                    <div class="service-layout__detail-bento-card service-layout__detail-bento-card--full-width service-layout__detail-bento-card--icon-left">
                        <div class="service-layout__detail-icon">
                             ${generateIconHTML("checklistLarge")}
                        </div>
                        <div class="service-layout__detail-card-content">
                            <h4>Comprehensive Checklist</h4>
                            ${inclusionsContent}
                        </div>
                    </div>`;
            }

            if (serviceData.pricing) {
                html += `
                    <div class="service-layout__detail-bento-card service-layout__detail-bento-card--full-width service-layout__detail-bento-card--icon-left">
                        <div class="service-layout__detail-icon">
                            ${generateIconHTML("tag")}
                        </div>
                        <div class="service-layout__detail-card-content">
                            <h4>Clear & Fair Pricing</h4>
                            <p>${serviceData.pricing}</p>
                        </div>
                    </div>`;
            }

            html += `
                <div class="service-layout__detail-bento-card service-layout__detail-bento-card--full-width service-layout__detail-bento-card--cta">
                    <button type="button" class="cta__button service-layout__quote-button" onclick="window.location.href='/contact';">
                        Request a Personalised Quote
                    </button>
                </div>
            `;

            html += '</div>';
        }
        detailContentElement.innerHTML = html;
    }

    // ... (rest of your existing JavaScript for masterPanes event listeners etc.)
    masterPanes.forEach(masterPane => {
        masterPane.addEventListener('click', (event) => {
            if (event.target.classList.contains('service-layout__master-item')) {
                const clickedItem = event.target;
                const serviceKey = clickedItem.dataset.serviceKey;
                const sectionElement = clickedItem.closest('.full-height-section');
                if (!sectionElement) return;
                const categoryKey = sectionElement.id.replace('service-section-', '');
                const detailContentElement = sectionElement.querySelector(`#service-detail-content-${categoryKey}`);
                const servicesDataForSection = allSectionData[categoryKey];

                if (!detailContentElement || !servicesDataForSection) return;

                const currentActive = masterPane.querySelector('.service-layout__master-item.is-active');
                if (currentActive) currentActive.classList.remove('is-active');
                clickedItem.classList.add('is-active');

                const service = servicesDataForSection[serviceKey];
                updateDetailView(detailContentElement, service);

                if (window.innerWidth <= 768) {
                     const detailPane = sectionElement.querySelector('.service-layout__detail');
                     if(detailPane) detailPane.style.display = 'block';
                 }
            }
        });
         const categoryKey = masterPane.closest('.full-height-section')?.id.replace('service-section-', '');
         if (categoryKey) {
             const detailContentElement = document.getElementById(`service-detail-content-${categoryKey}`);
             if (detailContentElement) {
                detailContentElement.innerHTML = '<p class="service-layout__detail-placeholder">Please select a service from the list to see details.</p>';
             }
         }
    });
});
</script>

</body>
</html>