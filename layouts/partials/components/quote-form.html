<style>
    .quote-form__button .dollar-sign {
        font-size: 12px;
        /* Optional: You might need to adjust vertical alignment slightly */
        margin-left: 5px;
        margin-bottom: 7px;
      }

      .price{
        font-size: 1.5em;
        margin-right: 5px;
    }

</style>

<section class="cta-form">


    <div>
    
<div class="quote-form-container">
  <form id="quote-form" class="quote-form">
    <div class="quote-form__group">
      <label for="service-type" class="visually-hidden">Service Type:</label>
      <select id="service-type" name="service" class="quote-form__select">
        <option value="Domestic">Domestic</option>
        <option value="Deep Clean">Deep Clean</option>
        <option value="End-of-Lease">End-of-Lease</option>
      </select>
    </div>

    <div class="quote-form__group">
      <label for="bathrooms" class="visually-hidden">Bathrooms:</label>
      <select id="bathrooms" name="bath" class="quote-form__select">
        <option value="1">1 Bathroom</option> <option value="2">2 Bathrooms</option>
        <option value="3">3 Bathrooms</option>
        <option value="4">4+ Bathrooms</option> </select>
    </div>

    <div class="quote-form__group">
      <label for="bedrooms" class="visually-hidden">Bedrooms:</label>
      <select id="bedrooms" name="bed" class="quote-form__select">
        <option value="1">1 Bedroom</option> <option value="2">2 Bedrooms</option>
        <option value="3">3 Bedrooms</option>
        <option value="4">4 Bedrooms</option>
        <option value="5">5+ Bedrooms</option> </select>
    </div>

    <div class="quote-form__action">
      <button type="button" id="quote-book-button" class="quote-form__button">
        Book From... &rarr;
      </button>
      <span id="price-display" style="display: none;"></span>
    </div>
  </form>
</div>
<p class="quote-form-help"><a href="#services-tabs-section" id="help-link">Need Help Choosing a Clean Type?</a></p>

</div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Pricing Data
    const pricingDataJSONString = {{ site.Data.pricing | jsonify }};
    const pricingData = JSON.parse(pricingDataJSONString);

    // Quote Form Elements
    const serviceSelect = document.getElementById('service-type');
    const bathSelect = document.getElementById('bathrooms');
    const bedSelect = document.getElementById('bedrooms');
    const quoteButton = document.getElementById('quote-book-button');
    const priceDisplay = document.getElementById('price-display');
    const helpLink = document.getElementById('help-link');

    // Modal Elements
    const modalOverlay = document.getElementById('booking-modal-overlay');
    const modalCloseBtn = document.getElementById('booking-modal-close-btn');
    const modalServiceSelect = document.getElementById('booking-service');
    const modalBedSelect = document.getElementById('booking-bedrooms');
    const modalBathSelect = document.getElementById('booking-bathrooms');
    const reoccurringGroup = document.getElementById('reoccurring-field-group');

    // Function to update the price and button text
    function updatePrice() {
      const serviceType = serviceSelect.value;
      const baths = bathSelect.value;
      const beds = bedSelect.value;
      const priceKey = `${beds}-${baths}`;

      let price = null;

      if (pricingData[serviceType] && pricingData[serviceType][priceKey]) {
        price = pricingData[serviceType][priceKey];
        quoteButton.innerHTML = `Book From <span class="dollar-sign">$</span><span class="price">${price}</span> &rarr;`;
        if (priceDisplay) priceDisplay.textContent = price;
      } else {
        quoteButton.textContent = "Request Quote â†’";
        if (priceDisplay) priceDisplay.textContent = "Quote Required";
      }
    }
    
    // --- Modal Logic ---
    function openModal() {
        modalServiceSelect.value = serviceSelect.value;
        modalBedSelect.value = bedSelect.value;
        modalBathSelect.value = bathSelect.value;
        modalServiceSelect.dispatchEvent(new Event('change'));
        
        if (modalOverlay) {
            modalOverlay.classList.remove('is-hidden');
            modalOverlay.classList.add('is-visible');
            document.body.style.overflow = 'hidden'; 
        }
    }

    function closeModal() {
        if (modalOverlay) {
            modalOverlay.classList.remove('is-visible');
            modalOverlay.classList.add('is-hidden');
            document.body.style.overflow = '';
        }
    }
    
    // --- Smooth Scroll for Help Link ---
    function smoothScrollToHelp(event) {
        event.preventDefault();
        const targetId = helpLink.getAttribute('href');
        const targetSection = document.querySelector(targetId);

        if (targetSection) {
            targetSection.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    }

    // --- Event Listeners ---
    serviceSelect.addEventListener('change', updatePrice);
    bathSelect.addEventListener('change', updatePrice);
    bedSelect.addEventListener('change', updatePrice);
    helpLink.addEventListener('click', smoothScrollToHelp);

    // Modal Listeners
    quoteButton.addEventListener('click', openModal);
    if(modalCloseBtn) modalCloseBtn.addEventListener('click', closeModal);
    if(modalOverlay) modalOverlay.addEventListener('click', (event) => {
        if (event.target === modalOverlay) {
            closeModal();
        }
    });
    
    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && modalOverlay && modalOverlay.classList.contains('is-visible')) {
            closeModal();
        }
    });

    // Initial price calculation
    updatePrice();
  });
</script>